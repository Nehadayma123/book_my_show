<%= stylesheet_link_tag 'threatre_index' %>
<%= stylesheet_link_tag 'pagination' %>

<p style="color: green"><%= notice %></p>

<h1>Shows</h1>

<table>
  <thead>
    <tr>
      <th>Movie</th>
      <th>Theatre</th>
      <th>Show_Date</th>
      <th>Show_Time</th>
      <th>Available Seats</th>
      <th>Price</th>
      <th colspan="3"></th>
    </tr>
  </thead>
  <tbody>
    <% @shows.each do |show| %>
      <tr>
        <td><%= show.movie.title %></td>
        <td><%= "#{show.theatre.name} (#{show.theatre.location})" %></td>
        <td><%= show.show_time.strftime('%B %d, %Y') %></td>
        <td><%= show.show_time.strftime(' %I:%M %p') %></td>
        <td><%= show.available_seates %></td>
        <td><%= show.price %></td>
        <td>
          <%= link_to 'Show', admin_show_path(show), class: 'btn btn-primary' %>
        </td>
        <td>
          <%=
            link_to 'Edit', edit_admin_show_path(show), class: 'btn btn-primary'
          %>
        </td>
        <td>
          <%=
            button_to 'Destroy',
                      admin_show_path(show),
                      method: :delete,
                      class: 'btn btn-primary'
          %>
        </td>
      </tr>
    <% end %>
  </tbody>
  <br />
</table>

<div class="pagination">
  <% if @page > 1 %>
    <%= link_to 'Previous', admin_shows_path(page: @page - 1), class: 'prev' %>
  <% end %>

  <% (1..@total_pages).each do |page_number| %>
    <%=
      link_to page_number,
              admin_shows_path(page: page_number),
              class: ('active' if page_number == @page)
    %>
  <% end %>

  <% if @page < @total_pages %>
    <%= link_to 'Next', admin_shows_path(page: @page + 1), class: 'next' %>
  <% end %>
</div>
<% if can? :manage, Show %>
  <%= link_to 'New Show', new_admin_show_path, class: 'btn btn-primary' %>
<% end %>
